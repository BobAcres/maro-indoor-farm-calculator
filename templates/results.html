<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Indoor Farm Calculator – Results</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>

  <body>
    <div class="app-card">
      <header class="app-header">
        <div class="brand">
          <img
            src="{{ url_for('static', filename='palmtiny.png') }}"
            alt="Maro logo"
            class="brand-logo"
          />
          <div class="brand-text">
            <div class="brand-name">Maro</div>
            <div class="brand-tagline">Indoor Farm Calculator</div>
          </div>
        </div>
        <div class="brand-meta">
          <span class="meta-pill">Controlled Environment Agriculture</span>
        </div>
      </header>

      <div class="compact-row" style="margin-bottom: 10px">
        <a href="{{ url_for('index') }}" style="font-size: 0.9rem">
          &#8592; Back to Calculator
        </a>
      </div>

      <!-- MAIN RESULTS TABLE -->
      <table class="results-table">
        <tbody>
          <!-- HEADER -->
          <tr class="results-header">
            <th colspan="2">Results ({{ results.currency_code }})</th>
          </tr>

          <!-- PRODUCTION -->
          <tr class="section-header">
            <th colspan="2">Assumed data & production</th>
          </tr>

          <tr>
            <td>System type</td>
            <td>{{ results.system_type }}</td>
          </tr>
          <tr>
            <td>Plants per m²</td>
            <td>{{ "%.2f"|format(results.plants_per_m2) }}</td>
          </tr>
          <tr>
            <td>Crops per year</td>
            <td>{{ results.crops_per_year }}</td>
          </tr>
          <tr>
            <td>Yield per m² per crop</td>
            <td>{{ results.yield_per_m2_per_crop }} kg/m²</td>
          </tr>
          <tr>
            <td>Total plants</td>
            <td>{{ "%.0f"|format(results.plants) }}</td>
          </tr>
          <tr>
            <td>Annual yield</td>
            <td>{{ "%.0f"|format(results.annual_yield) }} kg</td>
          </tr>

          <!-- NUTRIENTS -->
          <tr class="section-header">
            <th colspan="2">Nutrient requirements (estimated)</th>
          </tr>

          <tr>
            <td>Nutrient per m² per crop</td>
            <td>{{ "%.3f"|format(results.nutrient_per_m2_per_crop) }} kg</td>
          </tr>

          <tr>
            <td>Nutrient per plant per crop</td>
            <td>{{ "%.3f"|format(results.nutrient_per_plant_per_crop) }} kg</td>
          </tr>

          <tr>
            <td>Total annual nutrient requirement</td>
            <td>{{ "%.1f"|format(results.annual_nutrient_total) }} kg/year</td>
          </tr>

          <!-- COSTS -->
          <tr class="section-header">
            <th colspan="2">Production costs</th>
          </tr>

          <tr>
            <td>Gross annual production cost</td>
            <td>
              {{ "%.2f"|format(results.gross_production_cost) }} {{
              results.currency_code }}
            </td>
          </tr>

          <tr>
            <td>Solar savings ({{ results.SOLAR_SAVINGS_RATE * 100 }}%)</td>
            <td>
              {{ "%.2f"|format(results.solar_savings) }} {{
              results.currency_code }}
            </td>
          </tr>

          <tr>
            <td>Net annual production cost</td>
            <td>
              {{ "%.2f"|format(results.net_production_cost) }} {{
              results.currency_code }}
            </td>
          </tr>

          <tr>
            <td>Net cost per kg</td>
            <td>
              {% if results.cost_per_kg is not none %} {{
              "%.3f"|format(results.cost_per_kg) }} {{ results.currency_code
              }}/kg {% else %}N/A{% endif %}
            </td>
          </tr>

          <!-- REVENUE -->
          <tr class="section-header">
            <th colspan="2">Revenue</th>
          </tr>

          <tr>
            <td>Selling price per kg</td>
            <td>
              {{ "%.3f"|format(results.price_per_kg) }} {{ results.currency_code
              }}/kg
            </td>
          </tr>

          <tr>
            <td>Annual revenue</td>
            <td>
              {{ "%.2f"|format(results.annual_revenue) }} {{
              results.currency_code }}
            </td>
          </tr>

          <!-- SETUP -->
          <tr class="section-header">
            <th colspan="2">Setup cost</th>
          </tr>

          <tr>
            <td>Greenhouse level</td>
            <td>{{ results.setup_label }}</td>
          </tr>
          <tr>
            <td>Setup cost per m²</td>
            <td>
              {{ "%.2f"|format(results.capex_per_m2) }} {{ results.currency_code
              }}/m²
            </td>
          </tr>

          <tr>
            <td>Total setup cost</td>
            <td>
              {{ "%.2f"|format(results.total_setup_cost) }} {{
              results.currency_code }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
